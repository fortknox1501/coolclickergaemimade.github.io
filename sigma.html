<!DOCTYPE html>
    <body> 
        <title>sigma</title>
            <style>
             body { background-color: rgb(104, 157, 255); font-family: Arial; text-align: center; margin-top: 50px; overflow: hidden; }
    </style>
</body>
<head>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 20px;
        }
        h1 {
            color: #333;
        }
        p {
            color: #555;
            line-height: 1.6;
        }
        a {
            color: #00b7ff;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
         <script>
        // Create the audio element
        const music = new Audio("Elevator Music.mp3"); // replace with your file
        music.loop = true; // keeps playing in a loop

        let musicStarted = false;

        // Function to start music on first click
        function startMusic() {
            if (!musicStarted) {
                music.play();
                musicStarted = true;
                console.log("Music started!");
            }
        }

        // Listen for the first click anywhere on the page
        document.addEventListener("click", startMusic, { once: true });
        // (once:true makes sure it only runs once)
    </script>
</head>
<body>
    <button onclick="music.pause()">Pause Music</button>
    <button onclick="music.play()">Play Music</button>
    <!--Image car movement system and WASD controls-->
    <script>
        // creates image element and turns it into a car, places it in the center of the screen.
        const car = document.createElement("img");
        car.src = "car.jpg"; // replace with your image file
        car.style.position = "absolute";
        car.style.left = (window.innerWidth / 2 - 50) + "px"; // assuming car width is 100px
        car.style.top = (window.innerHeight / 2 - 26) + "px"; // assuming car height is 52px
        car.style.width = "100px"; // set width
        car.style.height = "50px"; // set height
        document.body.appendChild(car);
    </script>
    <script>
        // left and right arrow key movement (not up and down) and slowly accelerates and decelerates depending when a key is pressed and when it is released. and when you click right or left arrow key, is starts at 1px and slowly accelerates to 20px, and when you release the key, it slowly decelerates to 0px. and when you click left, the picture faces left, and when you click right, the picture faces right.
        let speed = 0;
        let maxSpeed = 20;
        let acceleration = 1;
        let deceleration = 1;
        let direction = 0; // -1 for left, 1 for right, 0 for no movement
        let facing = 1; // 1 for right, -1 for left
        let keys = {};
        document.addEventListener("keydown", (e) => {
            keys[e.key] = true;
            if (e.key === "ArrowLeft") {
                direction = -1;
                facing = -1;
                car.style.transform = "scaleX(-1)"; // flip image to face left
            } else if (e.key === "ArrowRight") {
                direction = 1;
                facing = 1;
                car.style.transform = "scaleX(1)"; // face right
            }
        });
        document.addEventListener("keyup", (e) => {
            keys[e.key] = false;
            if (e.key === "ArrowLeft" && !keys["ArrowRight"]) {
                direction = 0;
            } else if (e.key === "ArrowRight" && !keys["ArrowLeft"]) {
                direction = 0;
            }
        });
        function update() {
            if (direction !== 0) {
                speed += acceleration;
                if (speed > maxSpeed) speed = maxSpeed;
            } else {
                speed -= deceleration;
                if (speed < 0) speed = 0;
            }
            car.style.left = (car.offsetLeft + speed * facing) + "px";
            requestAnimationFrame(update);
        }
        update();
    </script>
    <script>
        // Gravity effect
        function applyGravity() {
            const gravity = 2; // pixels per frame
            const carRect = car.getBoundingClientRect();
            if (carRect.bottom < window.innerHeight - 100) { // 100px is the floor height
                car.style.top = (car.offsetTop + gravity) + "px";
            }
            requestAnimationFrame(applyGravity);
        }
        applyGravity();
    </script>
    <script>
        // Bottom floor
        const floor = document.createElement("div");
        floor.style.position = "absolute";
        floor.style.left = "0";
        floor.style.bottom = "0";
        floor.style.width = "100%";
        floor.style.height = "100px";
        floor.style.backgroundColor = "green";
        document.body.appendChild(floor);
    </script>
    <script>
        // creates walls and on touch, bounces the car back 20 px and stops the car from moving further in that direction.
        const wallLeft = document.createElement("div");
        wallLeft.style.position = "absolute";
        wallLeft.style.left = "0";
        wallLeft.style.top = "0";
        wallLeft.style.width = "20px";
        wallLeft.style.height = "100%";
        wallLeft.style.backgroundColor = "brown";
        document.body.appendChild(wallLeft);
        const wallRight = document.createElement("div");
        wallRight.style.position = "absolute";
        wallRight.style.right = "0";
        wallRight.style.top = "0";
        wallRight.style.width = "20px";
        wallRight.style.height = "100%";
        wallRight.style.backgroundColor = "brown";
        document.body.appendChild(wallRight);
        function checkCollision() {
            const carRect = car.getBoundingClientRect();
            const wallLeftRect = wallLeft.getBoundingClientRect();
            const wallRightRect = wallRight.getBoundingClientRect();
            if (carRect.left < wallLeftRect.right) {
                car.style.left = (wallLeftRect.right + 20) + "px"; // bounce back 20px
                speed = 0;
            } else if (carRect.right > wallRightRect.left) {
                car.style.left = (wallRightRect.left - carRect.width - 20) + "px"; // bounce back 20px
                speed = 0;
            }
            requestAnimationFrame(checkCollision);
        }
        checkCollision();
    </script>
    <script>
        // creates a draggable box that the car can push around and collide with. if a car hits the box, the box moves in the direction of the car's movement and stops the car on hit.
        const box = document.createElement("div");
        box.style.position = "absolute";
        box.style.left = (window.innerWidth / 2 - 25) + "px"; // center of screen
        box.style.top = (window.innerHeight / 2 + 50) + "px
        box.style.width = "50px";
        box.style.height = "50px";
        box.style.backgroundColor = "red";
        box.style.cursor = "grab";
        document.body.appendChild(box);
        let isDragging = false;
        let offsetX, offsetY;
        box.addEventListener("mousedown", (e) => {
            isDragging = true;
            offsetX = e.clientX - box.offsetLeft;
            offsetY = e.clientY - box.offsetTop;
            box.style.cursor = "grabbing";
        });
        document.addEventListener("mouseup", () => {
            isDragging = false;
            box.style.cursor = "grab";
        });
        document.addEventListener("mousemove", (e) => {
            if (isDragging) {
                box.style.left = (e.clientX - offsetX) + "px";
                box.style.top = (e.clientY - offsetY) + "px";
            }
        });
        function checkBoxCollision() {
            const carRect = car.getBoundingClientRect();
            const boxRect = box.getBoundingClientRect();
            if (carRect.right > boxRect.left &&
                carRect.left < boxRect.right &&
                carRect.bottom > boxRect.top &&
                carRect.top < boxRect.bottom) {
                // Collision detected, move the box in the direction of the car's movement
                if (speed > 0) { // moving right
                    box.style.left = (box.offsetLeft + speed) + "px";
                } else if (speed < 0) { // moving left
                    box.style.left = (box.offsetLeft + speed) + "px";
                }
                speed = 0; // stop the car
            }
            requestAnimationFrame(checkBoxCollision);
        }
        checkBoxCollision();
    </script>
    <script>
        // adds a text that is under the play music buttons, and it shows the car's current speed in px/s and updates in real-time.
        const speedText = document.createElement("div");
        speedText.style.position = "absolute";
        speedText.style.top = "60px";
        speedText.style.left = "50%";
        speedText.style.transform = "translateX(-50%)";
        speedText.style.fontSize = "20px";
        speedText.style.color = "black";
        document.body.appendChild(speedText);
        function updateSpeedText() {
            speedText.textContent = "Car Speed: " + speed.toFixed(2) + " px/s";
            requestAnimationFrame(updateSpeedText);
        }
        updateSpeedText();
    </script>
