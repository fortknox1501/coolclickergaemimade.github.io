<!DOCTYPE html>
<html>
<head>
    <title>THE clicker game</title>
    <link rel="icon" type="image/png" href="clickc.jpg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body { background-color: rgb(0, 255, 0); font-family: Arial; text-align: center; margin-top: 50px; overflow: hidden; }
        #score { font-size: 2em; margin-bottom: 20px; position: relative; z-index: 20; }
        #clickBtn { font-size: 1.5em; padding: 20px 40px; cursor: pointer; position: relative; z-index: 20; }
        #shopButtons { position:absolute; right:50px; top:100px; display:none; z-index:20; }
        #rebirthBtn { background:black; color:white; font-size:1.2em; padding:10px 30px; margin:10px; }
        #homeScreen {
            position:fixed;
            top:0; left:0; width:100vw; height:100vh;
            background:#74d8ff;
            display:flex; flex-direction:column; align-items:center; justify-content:center;
            z-index:1000;
        }
        #playBtn {
            font-size:1.5em;
            padding:20px 40px;
            margin-top:30px;
            background:black;
            color:white;
            border:none;
            border-radius:8px;
            cursor:pointer;
        }
        canvas { 
            position: fixed;
            top: 0; left: 0;
            width: 100vw; height: 100vh;
            z-index: 5;
        }
    </style>
</head>
<body>
    <!-- Home Screen -->
    <div id="homeScreen">
        <h1 style="font-size:3em; color:rgb(0, 0, 0); margin-bottom:10px;">the clicker game</h1>
        <button id="playBtn">play</button>
    </div>

    <h1 style="position: relative; z-index: 20;">this is a cool game click for clicks</h1>
    <div id="score">clicks: 0</div>
    <button id="clickBtn" style="color:black;">click for clicks</button>
    <button id="shopBtn" style="position:relative; z-index:20; color: rgb(0, 0, 0); background-color: gold;">shop</button>
    <button id="secretBtn" style="position:fixed; bottom:10px; right:10px; z-index:20;"> </button>
    
    <!-- Highest Score Display -->
    <div id="highestScore" style="position:fixed; bottom:50px; left:10px; font-size:1.2em; color:white; background:rgba(0,0,0,0.5); padding:8px 16px; border-radius:8px; border:2px solid white; z-index:20;">
        Highest score: 0
    </div>

    <!-- Background music -->
    <audio id="gameMusic" src="thetrack.mp3" loop></audio>

    <!-- Volume slider -->
    <div style="position:fixed; top:10px; right:10px; z-index:200;">
        <label for="volumeControl" style="color:white;">Volume</label>
        <input type="range" id="volumeControl" min="0" max="1" step="0.01" value="0.5">
    </div>

    <script>
        const bgMusic = document.getElementById('gameMusic'); // fixed ID
        const volumeControl = document.getElementById('volumeControl');
        let musicStarted = false;

        // Start music only after first click
        document.body.addEventListener('click', () => {
            if (!musicStarted) {
                bgMusic.volume = volumeControl.value; // set initial volume
                bgMusic.play();
                musicStarted = true;
            }
        });

        // Update volume when slider changes
        volumeControl.addEventListener('input', () => {
            bgMusic.volume = volumeControl.value;
        });
    </script>

    <div id="clock" style="position:fixed; bottom:10px; left:10px; font-size:1.2em; color:white; background:rgba(0,0,0,0.5); padding:8px 16px; border-radius:8px; border:2px solid white; cursor:pointer; z-index:20;"></div>
    <div id="giantClockOverlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.85); z-index:2000; align-items:center; justify-content:center;">
        <div style="position:relative; width:100vw; height:100vh; display:flex; align-items:center; justify-content:center;">
            <div id="giantClock" style="font-size:8em; color:white; background:rgba(0,0,0,0.7); padding:40px 80px; border-radius:32px; border:4px solid white; box-shadow:0 0 40px #fff;"></div>
            <button id="closeGiantClock" style="position:absolute; top:40px; right:60px; font-size:2em; background:red; color:white; border:none; border-radius:50%; width:60px; height:60px; cursor:pointer;">âœ•</button>
        </div>
    </div>

    <div id="shopButtons" style="display:none; position:absolute; right:50px; top:100px; flex-direction:column; z-index:20;">
        <button id="item1Btn" style="display:block; margin-bottom:8px;">1 CPS (10 clicks)</button>
        <button id="item2Btn" style="display:block; margin-bottom:8px;">5 CPS (50 clicks)</button>
        <button id="item3Btn" style="display:block; margin-bottom:8px;">10 CPS (100 clicks)</button>
        <button id="item4Btn" style="display:block; margin-bottom:8px;">50 CPS (500 clicks)</button>
        <button id="item5Btn" style="display:block; margin-bottom:8px;">100 CPS (1000 clicks)</button>
        <button id="rebirthBtn" style="display:block;">rebirth</button>
    </div>

    <script>
        const homeScreen = document.getElementById('homeScreen');
        const playBtn = document.getElementById('playBtn');
        playBtn.addEventListener('click', () => {
            homeScreen.style.display = 'none';
        });

        // Game variables
        let score = 0;
        let cps = 0;
        let cpsInterval = null;
        let highestScore = 0;

        // Load/save
        function loadData() {
            const savedScore = localStorage.getItem('score');
            const savedCps = localStorage.getItem('cps');
            const savedHighest = localStorage.getItem('highestScore');

            score = savedScore ? parseInt(savedScore) : 0;
            cps = savedCps ? parseInt(savedCps) : 0;
            highestScore = savedHighest ? parseInt(savedHighest) : 0;

            updateHighestScoreDisplay();
        }

        function saveData() {
            localStorage.setItem('score', score);
            localStorage.setItem('cps', cps);
            localStorage.setItem('highestScore', highestScore);
        }

        function updateHighestScoreDisplay() {
            document.getElementById('highestScore').textContent = "Highest score: " + highestScore;
        }

        function checkHighestScore() {
            if (score > highestScore) {
                highestScore = score;
                updateHighestScoreDisplay();
                saveData();
            }
        }

        const scoreDisplay = document.getElementById('score');
        const clickBtn = document.getElementById('clickBtn');
        const shopBtn = document.getElementById('shopBtn');
        const shopButtons = document.getElementById('shopButtons');
        const item1Btn = document.getElementById('item1Btn');
        const item2Btn = document.getElementById('item2Btn');
        const item3Btn = document.getElementById('item3Btn');
        const item4Btn = document.getElementById('item4Btn');
        const item5Btn = document.getElementById('item5Btn');
        const rebirthBtn = document.getElementById('rebirthBtn');

        function updateCPS() {
            if (cpsInterval) clearInterval(cpsInterval);
            if (cps > 0) {
                cpsInterval = setInterval(() => {
                    score += cps;
                    scoreDisplay.textContent = 'clicks: ' + score;
                    checkHighestScore();
                    saveData();
                }, 1000);
            }
        }

        shopBtn.addEventListener('click', () => {
            shopButtons.style.display = shopButtons.style.display === 'none' ? 'block' : 'none';
        });

        item1Btn.addEventListener('click', () => { if (score >= 10) { score -= 10; cps += 1; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item2Btn.addEventListener('click', () => { if (score >= 50) { score -= 50; cps += 5; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item3Btn.addEventListener('click', () => { if (score >= 100) { score -= 100; cps += 10; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item4Btn.addEventListener('click', () => { if (score >= 500) { score -= 500; cps += 50; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });
        item5Btn.addEventListener('click', () => { if (score >= 1000) { score -= 1000; cps += 100; updateCPS(); scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); } });

        rebirthBtn.addEventListener('click', () => { score = 0; cps = 0; scoreDisplay.textContent = 'clicks: ' + score; updateCPS(); saveData(); });

        clickBtn.addEventListener('click', () => { score++; scoreDisplay.textContent = 'clicks: ' + score; checkHighestScore(); saveData(); });

        loadData();
        scoreDisplay.textContent = 'clicks: ' + score;
        updateCPS();

        // Random button color
        function getRandomColor() { return "#" + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0'); }
        setInterval(() => { clickBtn.style.backgroundColor = getRandomColor(); clickBtn.style.color = "white"; }, 1000);

        // Clock
        function formatClock(now) {
            let hours = now.getHours();
            let minutes = now.getMinutes().toString().padStart(2, '0');
            let seconds = now.getSeconds().toString().padStart(2, '0');
            let ms = now.getMilliseconds().toString().padStart(3, '0');
            let period = hours >= 12 ? 'PM' : 'AM';
            hours = hours % 12 || 12;
            return `${hours}:${minutes}:${seconds}.${ms} ${period}`;
        }

        function updateClock() {
            const clock = document.getElementById('clock');
            const now = new Date();
            clock.textContent = formatClock(now);

            const giantClock = document.getElementById('giantClock');
            const overlay = document.getElementById('giantClockOverlay');
            if (overlay.style.display === 'flex') {
                giantClock.textContent = formatClock(now);
            }
        }
        setInterval(updateClock, 50);
        updateClock();

        const clockDiv = document.getElementById('clock');
        const giantClockOverlay = document.getElementById('giantClockOverlay');
        const closeGiantClock = document.getElementById('closeGiantClock');

        clockDiv.addEventListener('click', () => {
            giantClockOverlay.style.display = 'flex';
        });

        closeGiantClock.addEventListener('click', () => {
            giantClockOverlay.style.display = 'none';
        });
    </script>

    <!-- Physics with Matter.js -->
    <canvas id="world"></canvas>
    <script>
        const { Engine, Render, Runner, World, Bodies, Constraint, Mouse } = Matter;

        const engine = Engine.create();
        const world = engine.world;

        const render = Render.create({
            canvas: document.getElementById('world'),
            engine: engine,
            options: { width: window.innerWidth, height: window.innerHeight, wireframes: false, background: "transparent" }
        });
        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        // Boundaries
        const ground = Bodies.rectangle(window.innerWidth / 2, window.innerHeight + 25, window.innerWidth, 50, { isStatic: true });
        const leftWall = Bodies.rectangle(-25, window.innerHeight / 2, 50, window.innerHeight, { isStatic: true });
        const rightWall = Bodies.rectangle(window.innerWidth + 25, window.innerHeight / 2, 50, window.innerHeight, { isStatic: true });
        const ceiling = Bodies.rectangle(window.innerWidth / 2, -25, window.innerWidth, 50, { isStatic: true });
        World.add(world, [ground, leftWall, rightWall, ceiling]);

        // Orange box
        const box = Bodies.rectangle(window.innerWidth / 2, 100, 30, 30, {
            restitution: 0.4,
            friction: 0.5,
            render: { fillStyle: "orange" }
        });
        World.add(world, box);

        // Mouse hinge
        const mouse = Mouse.create(render.canvas);
        let hingeConstraint = null;
        function isInsideBox(mousePos, body) { return Matter.Bounds.contains(body.bounds, mousePos); }

        render.canvas.addEventListener("mousedown", e => {
            const mousePos = { x: e.clientX, y: e.clientY };
            if (isInsideBox(mousePos, box)) {
                hingeConstraint = Constraint.create({
                    pointA: mousePos,
                    bodyB: box,
                    pointB: { x: mousePos.x - box.position.x, y: mousePos.y - box.position.y },
                    stiffness: 0.9, damping: 0.1
                });
                World.add(world, hingeConstraint);
            }
        });
        render.canvas.addEventListener("mousemove", e => { if (hingeConstraint) hingeConstraint.pointA = { x: e.clientX, y: e.clientY }; });
        render.canvas.addEventListener("mouseup", () => { if (hingeConstraint) { World.remove(world, hingeConstraint); hingeConstraint = null; } });
    </script>
</body>
</html>



